<!DOCTYPE html>
<html>

<head>
    <link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body id="up">
    <h1>Drzewo <span class="red">czerwono</span>-czarne</h1>
    <h4>(ang. <span class="red">red</span>-black tree)</h4>

    <div class="intro">
        <h3><u>Wstawianie węzła</u></h3>
        <p>
            Kolejną standardową operacją w drzewach czerwono-czarnych jest wstawianie węzła. Przyjmiemy następującą strategię:
            <ul>
                <li>Wyszukamy miejsce dla wstawianego węzła (nie pozwalamy wstawiać węzła, którego klucz już istnieje)</li>
                <li>Wstawiamy węzeł w to miejsce i kolorujemy go na czerwono</li>
                <li>Dokonujemy naprawy drzewka (rotacje,przekolorowanie węzłów)</li>
            </ul>
            Ale po kolei...
            <br/>
            <br/>
            Spis treści (kliknij, by nie scrollować ;]):
            <ul>
                <li><a href="#relationships">Relacje w drzewku</a></li>
                <li><a href="#scenarioNo1">1. scenariusz - wstawiany węzeł jest korzeniem</a></li>
                <li><a href="#scenarioNo2">2. scenariusz - wujek wstawianego węzła jest czerwony</a></li>
                <li><a href="#scenarioNo3">3. scenariusz - wujek wstawianego węzła jest czarny (formacja trójkątna)</a></li>
                <li><a href="#scenarioNo4">4. scenariusz - wujek wstawianego węzła jest czarny (formacja liniowa)</a></li>
                <!-- <li><a href="#resume">Podsumowanie</a></li> -->
            </ul>
            <br/>
        </p>


        <section id="relationships">
            <p>
                <h4>Relacje w drzewku</h4>
                Krótkie przypomnienie relacji w drzewku na poniższym przykładzie.
                <br/>
                <img class="imgInsert" src="img/insert/insert_relationship1.png"/>
                <br/>
                Chcemy określić "who is who" dla węzła o kluczu "23" (ten zaznaczony z żółtą obręczą ;]).
                <ul>
                    <li>Węzeł bezpośrednio nad nim jest jego <b>rodzicem</b>.</li>
                    <li>Rodzic jego rodzica jest jego <b>dziadkiem</b>.</li>
                    <li>Brat jego rodzica jest jego <b>wujkiem</b>.</li>
                </ul>
                Tak jak w rodzinie :). Nothing fancy. Możemy przejść do scenariuszy wstawiania - 
                czyli na jakie sytuację możemy się natknąć po wstawieniu węzła.
                <br/>
                <img class="imgInsert" src="img/insert/insert_relationship2.png"/>
            </p>
        </section>


        <section id="scenarioNo1">
            <p>
                <h4>1. scenariusz - wstawiany węzeł jest korzeniem</h4>
                <br/>
                Nazwa przypadku mówi za siebie - mamy puste drzewko, wstawiamy pierwszy węzeł, staje się on automatycznie korzeniem. Ale...
                <br/>
                We wprowadzeniu do tematu zaznaczyliśmy, że będziemy wstawiali węzeł i go kolorowali na czerwono.
                Pamiętasz, jakiego koloru powinien być korzeń w RBT? Czarnego! To co musimy zrobić? Przekolorować wstawiony węzeł na czarny! Koniec.
                <br/>
                <img class="imgInsert" src="img/insert/insert_scenario1.gif"/>
            </p>
        </section>

        <section id="scenarioNo2">
            <p>
                <h4>2. scenariusz - wujek wstawianego węzła jest czerwony</h4>
                <br/>
                Załóżmy, że mamy takie <b>poddrzewo</b> (ważne, że jest to poddrzewo; dlaczego, wyjaśnimy później).
                <br/>
                <img class="imgInsert" src="img/insert/insert_scenario2_1.png"/>
                <br/>
                Wstawiamy nowy węzeł, np. o kluczu "3".
                <br/>
                <img class="imgInsert" src="img/insert/insert_scenario2_2.png"/>
                <br/>
                I co się stało? Czy węzeł czerwony ma jakieś obostrzenia dotyczące koloru jego dzieci? Muszą być czarne, prawda?
                Ale zamiast przekolorywać wstawiony węzeł na czarno robimy inaczej. Zerknijmy, jakiego koloru jest wujek wstawionego węzła.
                <br/>
                <img class="imgInsert" src="img/insert/insert_scenario2_3.png"/>
                <br/>
                Jest czerwony. Zatem zmieniamy kolory rodzica, dziadka i wujka węzła o kluczu "3" na przeciwne.
                <br/>
                <img class="imgInsert" src="img/insert/insert_scenario2_4.png"/>
                <br/>
                I koniec. Nasze poddrzewko jest naprawione. <b>Poddrzewko</b>, bo gdyby to było pełne drzewo, 
                to jeszcze musielibyśmy zmienić kolor korzenia na czarny, jak poniżej.
                <br/>
                <img class="imgInsert" src="img/insert/insert_scenario2_5.png"/>
                <br/>
                Podsumowując - wstawiamy węzeł, wujek czerwony, zmieniamy kolory.
                <br/>
                <img class="imgInsert" src="img/insert/insert_scenario2.gif"/>
                <br/>
            </p>
        </section>

        <section id="scenarioNo3">
            <p>
                <h4>3. scenariusz - wujek wstawianego węzła jest czarny (formacja trójkątna)</h4>
                <br/>
                Zadaniem głównym tego scenariusza jest doprowadzenie poddrzewa do stanu początkowego formacji liniowej.
                Jest to zatem pewien etap naprawy, a nie cały proces. Co ważne, możemy mieć prawą i lewą formację trójkątną.
                Tak samo, jak przy rotacjach - są to symetryczne sytuacje względem siebie. Przejdźmy do przykładu...
                <br/>
                Mamy takie podrzewo. Załóżmy, że przed chwilą wstawiliśmy węzeł o kluczu "15"
                <br/>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario3L_0.png"/>
                </div>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario3R_0.png"/>
                </div>
                <div class="below"></div>
                <br/>
                Po lewej stronie jest lewa formacja trójkątna , ponieważ ma wierzchołek trójkąta po lewej stronie. 
                Analogicznie, po prawej stronie mamy prawą formacje trójkątną, ponieważ ma wierzchołek po prawej stronie.
                Sprawdźmy, jakiego koloru jest wujek :).
                <br/>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario3L_1.png"/>
                </div>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario3R_1.png"/>
                </div>
                <div class="below"></div>
                <br/>
                Jest koloru czarnego. Ojej, czeka nas więcej pracy przy naprawie drzewka. Co robimy?
                W lewej formacji trójkątnej rotujemy rodzica nowo wstawionego węzła o kluczu "15" w lewą stronę. 
                Odpowiednio, w prawej formacji trójkątnej rotujemy rodzica nowo wstawionego węzła o kluczu "15" w prawą stronę. 
                <br/>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario3L_2.png"/>
                </div>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario3R_2.png"/>
                </div>
                <div class="below"></div>
                <br/>
                Otrzymujemy odpowiednio lewą i prawą formację liniową, a tym samym - sytuację wejściową do 4. scenariusza.
                Chcąc naprawić drzewko, trzeba się teraz przełączyć na ostatni scenariusz, a wszystkie operacje będą wykonywane z perspektywy
                rodzica wstawianego węzła o kluczu "15".
                <br/>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario3L_4.png"/>
                </div>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario3R_4.png"/>
                </div>
                <div class="below"></div>
            </p>
        </section>

        <section id="scenarioNo4">
            <p>
                <h4>4. scenariusz - wujek wstawianego węzła jest czarny (formacja liniowa)</h4>
                <br/>
                Okej, możemy miec 2 sytuacje początkowe:
                <ul>
                    <li>naprawiliśmy formację trójkątną i patrzymy teraz na drzewko po dokonanej rotacji z perspektywy rodzica wstawionego węzła,
                        który stworzył formację trójkątną
                    </li>
                    <li>przed chwilą wstawiliśmy nowy węzeł i po wstawieniu od razu stworzył formację liniową</li>
                </ul>
                <br/>
                Podobnie, możemy mieć lewą i prawą formację liniową (wstawiony węzeł, rodzic i dziadek tworzą odpowiednio lewy lub prawy skos).
                <br/>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario4L_1.png"/>
                </div>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario4R_1.png"/>
                </div>
                <div class="below"></div>
                <br/>
                Aby naprawić drzewko, najpierw rotujemy dziadka w prawo, jeśli jest to lewa formacja liniowa lub w lewo, 
                jeśli jest to prawa formacja liniowa. Węzeł na szaro pokazuje, co się dzieje w rotacji, 
                gdyby tam był węzeł dowolnego koloru (czerwony lub czarny).
                <br/>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario4L_2.png"/>
                </div>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario4R_2.png"/>
                </div>
                <div class="below"></div>
                <br/>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario4L_4.png"/>
                </div>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario4R_4.png"/>
                </div>
                <div class="below"></div>
                <br/>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario4L_5.png"/>
                </div>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario4R_5.png"/>
                </div>
                <div class="below"></div>
                <br/>
                Ostatni krok, to przekolorowanie na przeciwny kolor rodzica i dziadka dodanego węzła.
                <br/>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario4L_6.png"/>
                </div>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario4R_6.png"/>
                </div>
                <div class="below"></div>
                <br/>
                Poniższe animacje pokazują krok po kroku operacje wykonane w scenariuszu 3 i 4.
                <br/>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario3&4L.gif"/>
                </div>
                <div class="parallel">
                    <img class="imgInsert" src="img/insert/insert_scenario3&4R.gif"/>
                </div>
                <div class="below"></div>
            </p>
        </section>

        <section id="resume">
            <p>
                <h4>Podsumowanie</h4>
                Strzeżcie się czarnych wujków ;)
            </p>
        </section>

        <a href="#up">Powrót do góry</a>
    </div>

</body>

</html>